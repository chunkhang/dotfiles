# =============================================================================
# SETTINGS
# =============================================================================

# Prefix
unbind C-b
set -g prefix `
bind ` send-prefix

# Terminal
set -g default-terminal 'tmux-256color'
set -ga terminal-overrides ',*-256color:Tc'

# Enable mouse support
set -g mouse on

# History
set -g history-limit 2000

# Repeat time
set -g repeat-time 500

# Start numbering from 1
set -g base-index 1
setw -g pane-base-index 1

# Do not leave gap in numbering
set -g renumber-windows on

# Do not rename windows automatically
set -g allow-rename off
set -g automatic-rename off

# Vi bindings for copy mode
setw -g mode-keys vi

# =============================================================================
# MAPPINGS
# =============================================================================

# -----------------------------------------------------------------------------
# MISCELLANEOUS
# -----------------------------------------------------------------------------

# Kill server
bind Q kill-server

# Switch to last session
bind / switch-client -l

# Disable right click mouse menu
unbind -n MouseDown3Pane

# -----------------------------------------------------------------------------
# WINDOWS
# -----------------------------------------------------------------------------

# Create window
bind = new-window -c '#{pane_current_path}'

# Kill window
bind - confirm-before -p 'Kill window? (y/n)' kill-window

# Navigate window
bind -r [ previous-window
bind -r ] next-window
bind \\ last-window
bind p display-popup -E ~/.scripts/tmux/window/switch

# Swap window
bind -r '<' swap-window -d -t -1
bind -r '>' swap-window -d -t +1

# Synchronize window panes
bind y setw synchronize-panes

# -----------------------------------------------------------------------------
# PANES
# -----------------------------------------------------------------------------

# Kill pane
bind x confirm-before -p 'Kill pane? (y/n)' kill-pane

# Navigate pane
bind j select-pane -D
bind k select-pane -U
bind h select-pane -L
bind l select-pane -R

# Split pane
bind up split-window -b -v -c '#{pane_current_path}'
bind down split-window -v -c '#{pane_current_path}'
bind left split-window -b -h -c '#{pane_current_path}'
bind right split-window -h -c '#{pane_current_path}'

# Resize pane
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r H resize-pane -L 5
bind -r L resize-pane -R 5

# -----------------------------------------------------------------------------
# COPY MODE
# -----------------------------------------------------------------------------

bind space copy-mode
bind -T copy-mode-vi 'v' send -X begin-selection
bind -T copy-mode-vi 'y' send -X copy-selection
bind -T copy-mode-vi 'r' send -X rectangle-toggle
bind P paste-buffer

# =============================================================================
# PLUGINS
# =============================================================================

set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
  set -g @prefix_highlight_prefix_prompt '!'

set -g @plugin 'tmux-plugins/tmux-resurrect'
  set -g @resurrect-processes 'false'
  bind D run-shell '#{@resurrect-save-script-path}' \; detach-client

set -g @plugin 'tmux-plugins/tmux-sensible'

set -g @plugin 'tmux-plugins/tmux-sessionist'

set -g @plugin 'nhdaly/tmux-better-mouse-mode'
  set -g @scroll-speed-num-lines-per-scroll '2'
  set -g @emulate-scroll-for-no-mouse-alternate-buffer 'on'

set -g @plugin 'chunkhang/tmux-onedark-theme'

run '~/.tmux/plugins/tpm/tpm'
